import{s as g,as as p,a4 as b,at as N,au as A}from"./index-DKbcOXvO.js";class m{constructor(s,e,t){this.assetName=s,this.assetMimeType=e,this.parts=t}equals(s){return this===s||this.assetName===s.assetName&&this.assetMimeType===s.assetMimeType&&g(this.parts,s.parts,(e,t)=>e.equals(t))}isOnService(s){return this.parts.every(e=>e.isOnService(s))}makeHash(){let s="";for(const e of this.parts)s+=e.partHash;return s}async toBlob(s){const{parts:e}=this;if(e.length===1)return e[0].toBlob(s);const t=await Promise.all(e.map(a=>a.toBlob(s)));return p(s),new Blob(t)}}class B{constructor(s,e){this.partUrl=s,this.partHash=e}equals(s){return this===s||this.partUrl===s.partUrl&&this.partHash===s.partHash}isOnService(s){return this.partUrl.startsWith(`${s.path}/assets/`)}async toBlob(s){const{data:e}=await b(this.partUrl,{responseType:"blob"});return p(s),e}}function H(r){return v(r==null?void 0:r.source)}function u(r){return Array.isArray(r)?r.every(s=>s instanceof m):!1}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,f=/\.(gltf|glb)/i;function v(r){return r?Array.isArray(r)?r.some(l):l(r):!1}function l(r){if(r instanceof File){const{type:s,name:e}=r;return c.test(s)||f.test(e)}return c.test(r.assetMimeType)||f.test(r.assetName)}function M(r,s){if(!r)return!1;const{source:e}=r;return $(e,s)}function U(r,s){if(r===s)return!0;const{source:e}=r,{source:t}=s;if(e===t)return!0;if(u(e)&&u(t)){if(e.length!==t.length)return!1;const a=(n,o)=>n.assetName<o.assetName?-1:n.assetName>o.assetName?1:0,i=[...e].sort(a),y=[...t].sort(a);for(let n=0;n<i.length;++n)if(!i[n].equals(y[n]))return!1;return!0}return!1}function $(r,s){if(Array.isArray(r)){const e=r;return e.length>0&&e.every(t=>h(t,s))}return h(r,s)}function h(r,s){return r instanceof m&&r.isOnService(s)}function q(r,s){return r instanceof File?N(r,s):A(r.assetMimeType,r.assetName,s)}function O(r){return Array.isArray(r)?r:[r]}function S(r){return!!r.original}export{S as A,O as N,m as a,q as b,U as h,B as i,M as m,H as o};
