import{dS as _e,kk as V,hC as v,c9 as ke,aq as C,hK as N,hI as g,hM as Ie,m7 as xe,hO as L,fQ as b,hJ as p,cg as X,cf as W,cW as Q,aa as ee,hL as k,dl as ce,kl as ve,aC as Ce,jC as Ge,kq as we,am as Je,ae as Me}from"./index-DKbcOXvO.js";import{a as D,r as _}from"./executionError-DhMmVYP7.js";import{i as fe,r as ye}from"./TimeOnly-D9V4gdT1.js";import{l as Ae,p as Pe}from"./number-BXlzBnh7.js";var se,ae;function Dn(e){return _e.fromJSON(e.toJSON())}function Re(e){return e.toJSON?e.toJSON():e}function _n(e){return e instanceof Date}function kn(e){return e instanceof V}function In(e){return e instanceof v}function xn(e){return e instanceof fe}function vn(e){return e instanceof ye}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(se||(se={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(ae||(ae={}));const Cn=1e3,Gn={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},oe={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},wn={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function Jn(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function Mn(e,n){n||(n={}),typeof n=="function"&&(n={cmp:n});const r=typeof n.cycles=="boolean"&&n.cycles,i=n.cmp&&(t=n.cmp,function(c){return function(s,u){const l={key:s,value:c[s]},h={key:u,value:c[u]};return t(l,h)}});var t;const o=[];return function c(s){if(s!=null&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s===void 0)return;if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);let u,l;if(Array.isArray(s)){for(l="[",u=0;u<s.length;u++)u&&(l+=","),l+=c(s[u])||"null";return l+"]"}if(s===null)return"null";if(o.includes(s)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(s)-1,T=Object.keys(s).sort(i==null?void 0:i(s));for(l="",u=0;u<T.length;u++){const w=T[u],J=c(s[w]);J&&(l&&(l+=","),l+=JSON.stringify(w)+":"+J)}return o.splice(h,1),"{"+l+"}"}(e)}function Le(e){switch(e.type){case"catalog":case"csv":case"feature":case"geojson":case"knowledge-graph-sublayer":case"oriented-imagery":case"subtype-group":case"wfs":return!0;default:return!1}}function An(e){switch(e.type){case"catalog-footprint":case"subtype-sublayer":return!0;default:return Le(e)}}let de=class{};class M{constructor(){}}function le(e,n,r){if(e instanceof M&&!(e instanceof B)){const i=new B;return i.fn=e,i.parameterEvaluator=r,i.context=n,i}return e}class Rn extends M{constructor(n){super(),this.fn=n}createFunction(n){return(...r)=>this.fn(n,{preparsed:!0,arguments:r})}call(n,r){return this.fn(n,r)}marshalledCall(n,r,i,t){return t(n,r,(o,c,s)=>{s=s.map(l=>l instanceof M&&!(l instanceof B)?le(l,n,t):l);const u=this.call(i,{args:s});return ke(u)?u.then(l=>le(l,i,t)):u})}}class B extends M{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(n){return this.fn.createFunction(this.context)}call(n,r){return this.fn.marshalledCall(n,r,this.context,this.parameterEvaluator)}marshalledCall(n,r,i){return this.fn.marshalledCall(n,r,this.context,this.parameterEvaluator)}}class F{constructor(n=[]){this._elements=n}length(){return this._elements.length}get(n){return this._elements[n]}toArray(){return this.slice()}slice(n=0,r=this.length()){const i=[];for(let t=n;t<r;t++)i.push(this.get(t));return i}}class I extends F{constructor(n,r,i,t,o,c){super(n),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=i,this._hasM=t,this._cacheId=o,this._partId=c}get(n){if(this._lazyPt[n]===void 0){const r=this._elements[n];if(r===void 0)return;const i=new C(r[0],r[1],this._spRef);this._hasZ&&(i.z=r[2]),this._hasM&&(i.m=this._hasZ?r[3]:r[2]),i.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+n.toString(),this._lazyPt[n]=i}return this._lazyPt[n]}equalityTest(n){return n===this||n!==null&&n instanceof I&&n.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class ne extends F{constructor(n,r,i,t,o){super(n),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=t,this._spRef=r,this._cacheId=o}get(n){if(this._lazyPath[n]===void 0){const r=this._elements[n];if(r===void 0)return;this._lazyPath[n]=new I(r,this._spRef,this._hasZ,this._hasM,this._cacheId,n)}return this._lazyPath[n]}equalityTest(n){return n===this||n!==null&&n instanceof ne&&n.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class je{constructor(n){this.value=n}}class Ye{constructor(n){this.value=n}}const S={type:"VOID"},ze=Symbol("BREAK"),Ee=Symbol("CONTINUE");function A(e,n,r){return n===""||n==null||n===r||n===r?e:e=e.split(n).join(r)}function z(e){return e instanceof M}function re(e){return e instanceof de}function j(e){return!!p(e)||!!b(e)||!!y(e)||!!d(e)||!!m(e)||!!g(e)||e===null||e===S||typeof e=="number"}function qe(e,n){return e===void 0?n:e}function $e(e){return e==null?"":N(e)||O(e)?"Array":y(e)?"Date":m(e)?"Time":d(e)?"DateOnly":p(e)?"String":g(e)?"Boolean":b(e)?"Number":(e==null?void 0:e.declaredClass)==="esri.arcade.Attachment"?"Attachment":(e==null?void 0:e.declaredClass)==="esri.arcade.Portal"?"Portal":(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"?"Dictionary":be(e)?"KnowledgeGraph":e instanceof de?"Module":E(e)?"Feature":e instanceof C?"Point":e instanceof X?"Polygon":e instanceof W?"Polyline":e instanceof Q?"Multipoint":e instanceof ee?"Extent":z(e)?"Function":pe(e)?"FeatureSet":ge(e)?"FeatureSetCollection":te(e)?"Voxel":e===S?"":typeof e=="number"&&isNaN(e)?"Number":"Unrecognized Type"}function me(e){return e instanceof k}function E(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Feature"}function te(e){return(e==null?void 0:e.arcadeDeclaredClass)==="esri.arcade.Voxel"}function pe(e){return(e==null?void 0:e.declaredRootClass)==="esri.arcade.featureset.support.FeatureSet"}function he(e){return(e==null?void 0:e.declaredClass)==="esri.arcade.Dictionary"}function Ue(e){return he(e)||E(e)||te(e)}function ge(e){return(e==null?void 0:e.declaredRootClass)==="esri.arcade.featureSetCollection"}function be(e){return(e==null?void 0:e.declaredClass)==="esri.rest.knowledgeGraph.KnowledgeGraph"}function O(e){return e instanceof F}function y(e){return e instanceof v}function d(e){return e instanceof fe}function m(e){return e instanceof ye}function H(e){return e!=null&&typeof e=="object"}function Ve(e,n,r,i,t){if(e.length<n||e.length>r)throw new D(i,_.WrongNumberOfParameters,t)}function Be(e){return e<0?-Math.round(-e):Math.round(e)}function ie(e,n){return isNaN(e)||n==null||n===""?e.toString():(n=A(n,"‰",""),n=A(n,"¤",""),Ae(e,{pattern:n}))}function q(e,n){return n==null||n===""?e.toISOString(!0):e.toFormat(Se(n),{locale:ce(),numberingSystem:"latn"})}function Se(e,n=!1){e=e.replaceAll(/LTS|LT|L{1,4}|l{1,4}/g,"[$&]");let r="";const i=/(\[[^[]*\])|(\\)?([Hh]mm(ss)?|Mo|M{1,4}|Do|DDDo|D{1,4}|d{2,4}|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(const t of e.match(i)||[])switch(t){case"D":r+="d";break;case"DD":r+="dd";break;case"DDD":r+="o";break;case"d":r+="c";break;case"ddd":r+="ccc";break;case"dddd":r+="cccc";break;case"M":r+="L";break;case"MM":r+="LL";break;case"MMM":r+="LLL";break;case"MMMM":r+="LLLL";break;case"YY":r+="yy";break;case"Y":case"YYYY":r+="yyyy";break;case"Q":r+="q";break;case"Z":r+="Z";break;case"ZZ":r+="ZZ";break;case"ZZZ":r+="ZZZ";break;case"ZZZZ":r+=n?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":r+=n?"[ZZZZZ]":"ZZZZZ";break;case"S":r+="'S'";break;case"SS":r+="'SS'";break;case"SSS":r+="u";break;case"A":case"a":r+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":r+=t;break;default:t.length>=2&&t.slice(0,1)==="["&&t.slice(-1)==="]"?r+=`'${t.slice(1,-1)}'`:r+=`'${t}'`}return r}function a(e,n,r){switch(r){case">":return e>n;case"<":return e<n;case">=":return e>=n;case"<=":return e<=n}return!1}function He(e,n,r){if(e===null){if(n===null||n===S)return a(null,null,r);if(b(n))return a(0,n,r);if(p(n)||g(n))return a(0,f(n),r);if(y(n))return a(0,n.toNumber(),r);if(m(n)||d(n))return a(e,n.toNumber(),r)}if(e===S){if(n===null||n===S)return a(null,null,r);if(b(n))return a(0,n,r);if(p(n)||g(n))return a(0,f(n),r);if(y(n))return a(0,n.toNumber(),r);if(m(n)||d(n))return a(e,n.toNumber(),r)}else if(b(e)){if(b(n))return a(e,n,r);if(g(n))return a(e,f(n),r);if(n===null||n===S)return a(e,0,r);if(p(n))return a(e,f(n),r);if(y(n)||m(n)||d(n))return a(e,n.toNumber(),r)}else if(p(e)){if(p(n))return a(Z(e),Z(n),r);if(y(n)||m(n)||d(n))return a(f(e),n.toNumber(),r);if(b(n))return a(f(e),n,r);if(n===null||n===S)return a(f(e),0,r);if(g(n))return a(f(e),f(n),r)}else if(y(e)){if(y(n))return e.timeZone!==n.timeZone&&(e.isUnknownTimeZone?e=v.arcadeDateAndZoneToArcadeDate(e,n.timeZone):n.isUnknownTimeZone&&(n=v.arcadeDateAndZoneToArcadeDate(n,e.timeZone))),a(e.toNumber(),n.toNumber(),r);if(n===null||n===S)return a(e.toNumber(),0,r);if(b(n))return a(e.toNumber(),n,r);if(g(n)||p(n))return a(e.toNumber(),f(n),r);if(m(n))throw new D(null,_.CannotCompareDateAndTime,null);if(d(n))return a(e.toNumber(),n.toNumber(),r)}else if(g(e)){if(g(n))return a(e,n,r);if(b(n))return a(f(e),f(n),r);if(y(n)||m(n)||d(n))return a(f(e),n.toNumber(),r);if(n===null||n===S)return a(f(e),0,r);if(p(n))return a(f(e),f(n),r)}else if(d(e)){if(y(n))return a(e.toNumber(),n.toNumber(),r);if(n===null||n===S)return a(e.toNumber(),0,r);if(b(n))return a(e.toNumber(),n,r);if(g(n)||p(n))return a(e.toNumber(),f(n),r);if(m(n))throw new D(null,_.CannotCompareDateAndTime,null);if(d(n))return a(e.toNumber(),n.toNumber(),r)}else if(m(e)){if(y(n))throw new D(null,_.CannotCompareDateAndTime,null);if(n===null||n===S)return a(e.toNumber(),0,r);if(b(n))return a(e.toNumber(),n,r);if(g(n)||p(n))return a(e.toNumber(),f(n),r);if(m(n))return a(e.toNumber(),n.toNumber(),r);if(d(n))throw new D(null,_.CannotCompareDateAndTime,null)}return!!Te(e,n)&&(r==="<="||r===">=")}function Te(e,n){if(e===n||e===null&&n===S||n===null&&e===S)return!0;if(y(e)&&y(n)||m(e)&&m(n)||d(e)&&d(n))return e.equals(n);if(e instanceof ne||e instanceof I)return e.equalityTest(n);if(e instanceof C&&n instanceof C){const r=e.cache._arcadeCacheId,i=n.cache._arcadeCacheId;if(r!=null)return r===i}return!!(H(e)&&H(n)&&(e._arcadeCacheId===n._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===n._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function Ke(e,{useNumbersForDates:n}){let r="";for(const i in e){r!==""&&(r+=",");const t=e[i];t==null?r+=JSON.stringify(i)+":null":g(t)||b(t)||p(t)?r+=JSON.stringify(i)+":"+JSON.stringify(t):me(t)?r+=JSON.stringify(i)+":"+x(t):m(t)||d(t)?r+=`${JSON.stringify(i)}:${JSON.stringify(t.toString())}`:O(t)||Array.isArray(t)?r+=JSON.stringify(i)+":"+x(t,null,n):y(t)?r+=n?JSON.stringify(i)+":"+JSON.stringify(t.getTime()):JSON.stringify(i)+":"+t.stringify():t!==null&&typeof t=="object"&&"castToText"in t&&(r+=JSON.stringify(i)+":"+t.castToText(n))}return"{"+r+"}"}function Z(e,n){if(p(e))return e;if(e===null)return"";if(b(e))return ie(e,n);if(g(e))return e.toString();if(y(e))return q(e,n);if(m(e)||d(e))return e.toFormat(n);if(e instanceof k)return JSON.stringify(e.toJSON());if(N(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=Y(e[i]);return"["+r.join(",")+"]"}if(e instanceof F){const r=[];for(let i=0;i<e.length();i++)r[i]=Y(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&"castToText"in e?e.castToText():z(e)?"object, Function":e===S?"":re(e)?"object, Module":""}function Xe(e){const n=[];if(e instanceof F){for(let r=0;r<e.length();r++)n[r]=f(e.get(r));return n}if(!N(e))return null;for(let r=0;r<e.length;r++)n[r]=f(e[r]);return n}function x(e,n,r=!1){if(p(e))return e;if(e===null)return"";if(b(e))return ie(e,n);if(g(e))return e.toString();if(y(e))return q(e,n);if(m(e)||d(e))return e.toFormat(n);if(e instanceof k)return e instanceof ee?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+K(e.spatialReference)+"}":K(e.toJSON(),(i,t)=>i.key===t.key?0:i.key==="spatialReference"?1:t.key==="spatialReference"||i.key<t.key?-1:i.key>t.key?1:0);if(N(e)){const i=[];for(let t=0;t<e.length;t++)i[t]=Y(e[t],r);return"["+i.join(",")+"]"}if(e instanceof F){const i=[];for(let t=0;t<e.length();t++)i[t]=Y(e.get(t),r);return"["+i.join(",")+"]"}return e!==null&&typeof e=="object"&&"castToText"in e?e.castToText(r):z(e)?"object, Function":e===S?"":re(e)?"object, Module":""}function Y(e,n=!1){if(e===null)return"null";if(g(e)||b(e)||p(e))return JSON.stringify(e);if(e instanceof k||e instanceof F||Array.isArray(e))return x(e,null,n);if(y(e))return JSON.stringify(n?e.getTime():q(e,""));if(m(e)||d(e))return JSON.stringify(e.toString());if(e!==null&&typeof e=="object"){if("castToText"in e)return e.castToText(n)}else if(e===S)return"null";return"null"}function f(e,n){return b(e)?e:e===null||e===""?0:y(e)||d(e)||m(e)?NaN:g(e)?e?1:0:N(e)||e===""||e===void 0?NaN:n!==void 0&&p(e)?(n=A(n,"‰",""),n=A(n,"¤",""),Pe(e,{pattern:n})):e===S?0:Number(e)}function We(e,n){if(y(e))return e;if(p(e)){const r=Qe(e,n);if(r)return v.dateTimeToArcadeDate(r)}return null}function Qe(e,n){const r=/ (\d\d)/,i=ve(n);let t=V.fromISO(e,{zone:i});return t.isValid||r.test(e)&&(e=e.replace(r,"T$1"),t=V.fromISO(e,{zone:n}),t.isValid)?t:null}function en(e){return g(e)?e:p(e)?(e=e.toLowerCase())==="true":!!b(e)&&e!==0&&!isNaN(e)}function nn(e,n){const r=JSON.parse(e);return r&&!r.spatialReference&&(r.spatialReference=n),Ce(r)}function rn(e,n){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=n),e)}function tn(e){if(e===null)return null;if(e instanceof C)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof X){if(e.rings.length===0)return null;for(const n of e.rings)if(n.length>0)return e;return null}if(e instanceof W){if(e.paths.length===0)return null;for(const n of e.paths)if(n.length>0)return e;return null}return e instanceof Q?e.points.length===0?null:e:e instanceof ee?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function Ne(e,n){if(!e||!e.domain)return n;let r=null,i=null;if(y(n))r=n.toNumber();else if(d(n))r=n.toString();else if(m(n))r=n.toStorageString();else if(e.field.type==="string"||e.field.type==="esriFieldTypeString")r=Z(n);else{if(n==null)return null;if(n==="")return n;r=f(n)}for(let t=0;t<e.domain.codedValues.length;t++){const o=e.domain.codedValues[t];o.code===r&&(i=o)}return i===null?Z(n):i.name}function Fe(e,n){if(!e||!e.domain)return n;let r=null;const i=Z(n);for(let t=0;t<e.domain.codedValues.length;t++){const o=e.domain.codedValues[t];o.name===i&&(r=o)}return r===null?n:r.code}function $(e,n,r=null,i=null){if(!n||!n.fields)return null;let t,o,c=null;for(let h=0;h<n.fields.length;h++){const T=n.fields[h];T.name.toLowerCase()===e.toString().toLowerCase()&&(c=T)}if(c===null)throw new D(null,_.FieldNotFound,null,{key:e});let s=n.typeIdField,u="id",l=n.types;if(n.subtypeField&&(s=n.subtypeField,u="code",l=n.subtypes??[]),i===null&&r&&s)i=r.hasField(s)?r.field(s):null;else if(s&&i!==null){let h=!1;for(const T of l||[])if(i===T[u]){h=!0;break}if(!h){for(const T of l||[])if(i===T.name){i=T[u],h=!0;break}}h||(i=null,r&&s&&(i=r.hasField(s)?r.field(s):null))}return i!=null&&l.some(h=>{var T;return h[u]===i&&(t=(T=h.domains)==null?void 0:T[c.name],t&&t.type==="inherited"&&(t=ue(c.name,n),o=!0),!0)}),o||t||(t=ue(e,n)),{field:c,domain:t}}function ue(e,n){let r;return n.fields.some(i=>(i.name.toLowerCase()===e.toLowerCase()&&(r=i.domain),!!r)),r}function K(e,n){n||(n={}),typeof n=="function"&&(n={cmp:n});const r=typeof n.cycles=="boolean"&&n.cycles,i=n.cmp&&(t=n.cmp,function(c){return function(s,u){const l={key:s,value:c[s]},h={key:u,value:c[u]};return t(l,h)}});var t;const o=[];return function c(s){if(s!=null&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s===void 0)return;if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);let u,l;if(Array.isArray(s)){for(l="[",u=0;u<s.length;u++)u&&(l+=","),l+=c(s[u])||"null";return l+"]"}if(s===null)return"null";if(o.includes(s)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=o.push(s)-1,T=Object.keys(s).sort(i==null?void 0:i(s));for(l="",u=0;u<T.length;u++){const w=T[u],J=c(s[w]);J&&(l&&(l+=","),l+=JSON.stringify(w)+":"+J)}return o.splice(h,1),"{"+l+"}"}(e)}function sn(e){if(e===null)return null;const n=[];for(const r of e)E(r)?n.push(r.geometry()):n.push(r);return n}function G(e,n){if(!(n instanceof C))throw new D(null,_.InvalidParameter,null);e.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}function an(e,n){if(N(e)||O(e)){let r=!1,i=!1,t=[],o=n;if(N(e)){for(const c of e)G(t,c);t.length>0&&(o=e[0].spatialReference,r=e[0].hasZ,i=e[0].hasM)}else if(e instanceof I)t=e._elements,t.length>0&&(r=e._hasZ,i=e._hasM,o=e.get(0).spatialReference);else{if(!O(e))throw new D(null,_.InvalidParameter,null);for(const c of e.toArray())G(t,c);t.length>0&&(o=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return t.length===0?null:(Ge(t)||(t=t.slice().reverse()),new X({rings:[t],spatialReference:o,hasZ:r,hasM:i}))}return e}function on(e,n){if(N(e)||O(e)){let r=!1,i=!1,t=[],o=n;if(N(e)){for(const c of e)G(t,c);t.length>0&&(o=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof I)t=e._elements,t.length>0&&(r=e._hasZ,i=e._hasM,o=e.get(0).spatialReference);else if(O(e)){for(const c of e.toArray())G(t,c);t.length>0&&(o=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return t.length===0?null:new W({paths:[t],spatialReference:o,hasZ:r,hasM:i})}return e}function ln(e,n){if(N(e)||O(e)){let r=!1,i=!1,t=[],o=n;if(N(e)){for(const c of e)G(t,c);t.length>0&&(o=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof I)t=e._elements,t.length>0&&(r=e._hasZ,i=e._hasM,o=e.get(0).spatialReference);else if(O(e)){for(const c of e.toArray())G(t,c);t.length>0&&(o=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return t.length===0?null:new Q({points:t,spatialReference:o,hasZ:r,hasM:i})}return e}function un(e,n=!1){const r=[];if(e===null)return r;if(N(e)===!0){for(let i=0;i<e.length;i++){const t=Z(e[i]);t===""&&n!==!0||r.push(t)}return r}if(e instanceof F){for(let i=0;i<e.length();i++){const t=Z(e.get(i));t===""&&n!==!0||r.push(t)}return r}if(j(e)){const i=Z(e);return i===""&&n!==!0||r.push(i),r}return[]}let U=0;function cn(e){return U++,U%100==0?(U=0,new Promise(n=>{setTimeout(()=>{n(e)},0)})):e}function fn(e,n,r){switch(r){case"&":return e&n;case"|":return e|n;case"^":return e^n;case"<<":return e<<n;case">>":return e>>n;case">>>":return e>>>n}}function P(e,n=null){return e==null?null:g(e)||b(e)||p(e)?e:e instanceof k?(n==null?void 0:n.keepGeometryType)===!0?e:e.toJSON():e instanceof F?e.toArray().map(r=>P(r,n)):Array.isArray(e)?e.map(r=>P(r,n)):L(e)?e:y(e)?e.toJSDate():m(e)?e.toString():d(e)?e.toJSDate():e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(n):null}async function yn(e,n,r,i,t){const o=await Ze(e,n,r);t[i]=o}async function Ze(e,n=null,r=null){if(e instanceof F&&(e=e.toArray()),e==null)return null;if(j(e)||e instanceof k||L(e)||y(e))return P(e,r);if(Array.isArray(e)){const i=[],t=[];for(const o of e)o===null||j(o)||o instanceof k||L(o)||y(o)?t.push(P(o,r)):(t.push(null),i.push(yn(o,n,r,t.length-1,t)));return i.length>0&&await Promise.all(i),t}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(n,r):null}function R(e){return Oe(e)?e.parent:e}function Oe(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.support.SubtypeSublayer"}function dn(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.SubtypeGroupLayer"}function mn(e,n,r){const i=R(e.fullSchema());return i===null||!i.fields?null:$(n,i,e,r)}function pn(e){const n=R(e.fullSchema());return n===null?null:n.fields?n.subtypeField?{subtypeField:n.subtypeField,subtypes:n.subtypes?n.subtypes.map(r=>({name:r.name,code:r.code})):[]}:n.typeIdField?{subtypeField:n.typeIdField,subtypes:n.types?n.types.map(r=>({name:r.name,code:r.id})):[]}:null:null}function hn(e,n,r,i){const t=R(e.fullSchema());if(t===null||!t.fields)return null;const o=$(n,t,e,i);if(r===void 0)try{r=e.field(n)}catch{return null}return Ne(o,r)}function gn(e,n,r,i){const t=R(e.fullSchema());if(t===null||!t.fields)return null;if(r===void 0){try{r=e.field(n)}catch{return null}return r}return Fe($(n,t,e,i),r)}function bn(e){return(e==null?void 0:e.timeZone)??"system"}function Sn(e){const n=R(e.fullSchema());if(n===null||!n.fields)return null;const r=[];for(const i of n.fields)r.push(Re(i));return{objectIdField:n.objectIdField,globalIdField:n.globalIdField??"",geometryType:oe[n.geometryType]===void 0?"":oe[n.geometryType],fields:r}}function Tn(e,n){const r=v.systemTimeZoneCanonicalName;return e==="system"&&(e=r),{version:De,engineVersion:we,timeZone:e,userTimeZone:r,spatialReference:n instanceof Je?n.toJSON():n,application:Me.applicationName??"",engine:"web",locale:ce()}}const De="1.30",Ln=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResult:Ye,ReturnResult:je,absRound:Be,arcadeVersion:De,autoCastArrayOfPointsToMultiPoint:ln,autoCastArrayOfPointsToPolygon:an,autoCastArrayOfPointsToPolyline:on,autoCastFeatureToGeometry:sn,binaryOperator:fn,breakResult:ze,castAsJson:P,castAsJsonAsync:Ze,castRecordToText:Ke,continueResult:Ee,defaultExecutingContext:Tn,defaultTimeZone:bn,defaultUndefined:qe,equalityTest:Te,featureDomainCodeLookup:gn,featureDomainValueLookup:hn,featureFullDomain:mn,featureSchema:Sn,featureSubtypes:pn,fixNullGeometry:tn,fixSpatialReference:rn,formatDate:q,formatNumber:ie,getDomain:$,getDomainCode:Fe,getDomainValue:Ne,getType:$e,greaterThanLessThan:He,isArray:N,isBoolean:g,isDate:y,isDateOnly:d,isDictionary:he,isDictionaryLike:Ue,isFeature:E,isFeatureSet:pe,isFeatureSetCollection:ge,isFunctionParameter:z,isGeometry:me,isGraphic:Ie,isImmutableArray:O,isInteger:xe,isJsDate:L,isKnowledgeGraph:be,isModule:re,isNumber:b,isObject:H,isSimpleType:j,isString:p,isSubtypeGrouplayer:dn,isSubtypeSublayer:Oe,isTime:m,isVoxel:te,multiReplace:A,parseGeometryFromJson:nn,pcCheck:Ve,stableStringify:K,standardiseDateFormat:Se,tick:cn,toBoolean:en,toDate:We,toNumber:f,toNumberArray:Xe,toString:Z,toStringArray:un,toStringExplicit:x,voidOperation:S},Symbol.toStringTag,{value:"Module"}));export{gn as $,rn as A,pe as B,un as C,Fe as D,mn as E,sn as F,z as G,E as H,Ye as I,an as J,Sn as K,Ee as L,on as M,We as N,$ as O,A as P,ge as Q,ln as R,Dn as S,se as T,me as U,_n as V,Ue as W,be as X,ze as Y,en as Z,je as _,O as a,kn as a0,vn as a1,In as a2,xn as a3,Gn as a4,ae as a5,Re as a6,oe as a7,cn as a8,Cn as a9,Mn as aa,Jn as ab,Le as ac,Oe as ad,An as ae,j as af,P as ag,Ze as ah,I as ai,ne as aj,$e as ak,Se as al,Be as am,tn as an,te as ao,Xe as ap,Tn as aq,Ln as ar,f as b,He as c,fn as d,Rn as e,B as f,y as g,m as h,d as i,bn as j,pn as k,hn as l,Te as m,le as n,Ve as o,Ne as p,qe as q,M as r,de as s,F as t,x as u,S as v,wn as w,he as x,Z as y,Ke as z};
